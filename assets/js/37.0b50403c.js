(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{502:function(t,e,n){"use strict";n.r(e);var s=n(42),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"vuex-とは何か"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vuex-とは何か"}},[t._v("#")]),t._v(" Vuex とは何か？")]),t._v(" "),n("VideoPreview"),t._v(" "),n("p",[t._v("Vuex は Vue.js アプリケーションのための "),n("strong",[t._v("状態管理パターン + ライブラリ")]),t._v("です。\nこれは予測可能な方法によってのみ状態の変異を行うというルールを保証し、アプリケーション内の全てのコンポーネントのための集中型のストアとして機能します。\nまた Vue 公式の"),n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools",target:"_blank",rel:"noopener noreferrer"}},[t._v("開発ツール拡張"),n("OutboundLink")],1),t._v("と連携し、設定なしでタイムトラベルデバッグやステートのスナップショットのエクスポートやインポートのような高度な機能を提供します。")]),t._v(" "),n("h3",{attrs:{id:"状態管理パターン-とはなんですか"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#状態管理パターン-とはなんですか"}},[t._v("#")]),t._v(' "状態管理パターン"とはなんですか？')]),t._v(" "),n("p",[t._v("単純な Vue で作られたカウンターアプリをみてみましょう:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// view")]),t._v("\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    <div>{{ count }}</div>\n  ")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// actions")]),t._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("これはいくつかの要素をアプリ自身に含んでいます:")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("状態")]),t._v("、これは私達のアプリを動かす信頼できる情報源(the source of truth)です。")]),t._v(" "),n("li",[n("strong",[t._v("ビュー")]),t._v("、これは"),n("strong",[t._v("状態")]),t._v("のただの宣言的なマッピングです。")]),t._v(" "),n("li",[n("strong",[t._v("アクション")]),t._v("、これは"),n("strong",[t._v("ビュー")]),t._v("からのユーザー入力に反応して、状態の変更を可能にする方法です。")])]),t._v(" "),n("p",[t._v('これらは"単方向データフロー"のコンセプトの極めてシンプルな責務です:')]),t._v(" "),n("p",{staticStyle:{"text-align":"center",margin:"2em"}},[n("img",{staticStyle:{width:"100%","max-width":"450px"},attrs:{src:"/flow.png"}})]),t._v(" "),n("p",[t._v("しかし、単純さは、"),n("strong",[t._v("共通の状態を共有する複数のコンポーネントを持ったときに")]),t._v("、すぐに破綻します:")]),t._v(" "),n("ul",[n("li",[t._v("複数のビューが同じ状態に依存することがあります。")]),t._v(" "),n("li",[t._v("異なるビューからのアクションで、同じ状態を変更する必要があります。")])]),t._v(" "),n("p",[t._v("一つ目は、プロパティ (props) として深く入れ子になったコンポーネントに渡すのは面倒で、兄弟コンポーネントでは単純に機能しません。二つ目は、親子のインスタンスを直接参照したり、イベントを介して複数の状態のコピーを変更、同期することを試みるソリューションに頼っていることがよくあります。これらのパターンは、いずれも脆く、すぐにメンテナンスが困難なコードに繋がります。")]),t._v(" "),n("p",[t._v('では、コンポーネントから共有している状態を抽出し、それをグローバルシングルトンで管理するのはどうでしょうか？ これにより、コンポーネントツリーは大きな "ビュー" となり、どのコンポーネントもツリー内のどこにあっても状態にアクセスしたり、アクションをトリガーできます!')]),t._v(" "),n("p",[t._v("さらに、状態管理に関わる概念を定義、分離し、特定のルールを敷くことで、コードの構造と保守性を向上させることができます。")]),t._v(" "),n("p",[t._v("これが Vuex の背景にある基本的なアイディアであり、"),n("a",{attrs:{href:"https://facebook.github.io/flux/docs/overview",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flux"),n("OutboundLink")],1),t._v("、 "),n("a",{attrs:{href:"http://redux.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Redux"),n("OutboundLink")],1),t._v(" そして "),n("a",{attrs:{href:"https://guide.elm-lang.org/architecture/",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Elm Architecture"),n("OutboundLink")],1),t._v("から影響を受けています。\n他のパターンと異なるのは、Vuex は効率的な更新のために、Vue.js の粒度の細かいリアクティビティシステムを利用するよう特別に調整して実装されたライブラリだということです。")]),t._v(" "),n("p",[t._v("あなたがもし対話型の方法でVuexを学びたいのであれば、"),n("a",{attrs:{href:"https://scrimba.com/g/gvuex",target:"_blank",rel:"noopener noreferrer"}},[t._v("Scrimba"),n("OutboundLink")],1),t._v("のVuexコースをぜひ試してみてください。")]),t._v(" "),n("p",[n("img",{attrs:{src:"/vuex.png",alt:"vuex"}})]),t._v(" "),n("h3",{attrs:{id:"いつ、vuexを使うべきでしょうか"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#いつ、vuexを使うべきでしょうか"}},[t._v("#")]),t._v(" いつ、Vuexを使うべきでしょうか？")]),t._v(" "),n("p",[t._v("Vuex は、共有状態の管理に役立ちますが、さらに概念やボイラープレートのコストがかかります。これは、短期的生産性と長期的生産性のトレードオフです。")]),t._v(" "),n("p",[t._v("もし、あなたが大規模な SPA を構築することなく、Vuex を導入した場合、冗長で気が遠くなるように感じるかもしれません。そう感じることは全く普通です。あなたのアプリがシンプルであれば、Vuex なしで問題ないでしょう。単純な "),n("a",{attrs:{href:"https://jp.vuejs.org/v2/guide/state-management.html#%E3%82%B7%E3%83%B3%E3%83%97%E3%83%AB%E3%81%AA%E7%8A%B6%E6%85%8B%E7%AE%A1%E7%90%86%E3%82%92%E3%82%BC%E3%83%AD%E3%81%8B%E3%82%89%E4%BD%9C%E3%82%8B",target:"_blank",rel:"noopener noreferrer"}},[t._v("ストアパターン"),n("OutboundLink")],1),t._v(" が必要なだけかもしれません。しかし、今あなたが中規模から大規模の SPA を構築しているなら、Vue コンポーネントの外の状態をもっとうまく扱えないか考えなくてはならない状況にあるかもしれません。その場合 Vuex は次のステップとして最適でしょう。これは Redux の作者、Dan Abramov からの良い引用です:")]),t._v(" "),n("blockquote",[n("p",[t._v("Flux ライブラリは眼鏡のようなものです: あなたが必要な時にいつでも分かるのです。")])])],1)}),[],!1,null,null,null);e.default=a.exports}}]);